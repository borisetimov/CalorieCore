@{
    ViewData["Title"] = "Home";
}

<div class="home-page py-4">
    <div class="container">
        <div class="text-center mb-5">
            <h1 class="display-5 fw-bold gradient-text">Dashboard</h1>
            <p class="text-secondary">
                Track activities, manage meals, and discover healthy recipes.
            </p>
        </div>

        <div class="row g-4 text-center mb-5">
            <div class="col-md-4">
                <div class="card h-100 glass-card">
                    <div class="card-body d-flex flex-column align-items-center py-4">
                        <div class="dashboard-icon fs-1 mb-3">🏃</div>
                        <h5 class="card-title fw-bold">Activities</h5>
                        <p class="card-text text-secondary small">Log workouts and track calories burned.</p>
                        <a asp-controller="UserActivities" asp-action="Index" class="btn btn-warning mt-auto px-4">
                            View Activities
                        </a>
                    </div>
                </div>
            </div>

            <div class="col-md-4">
                <div class="card h-100 glass-card">
                    <div class="card-body d-flex flex-column align-items-center py-4">
                        <div class="dashboard-icon fs-1 mb-3">🍽️</div>
                        <h5 class="card-title fw-bold">Meals</h5>
                        <p class="card-text text-secondary small">Log food and track calories eaten.</p>
                        <a asp-controller="Meals" asp-action="Index" class="btn btn-warning mt-auto px-4">
                            View Meals
                        </a>
                    </div>
                </div>
            </div>

            <div class="col-md-4">
                <div class="card h-100 glass-card">
                    <div class="card-body d-flex flex-column align-items-center py-4">
                        <div class="dashboard-icon fs-1 mb-3">🥗</div>
                        <h5 class="card-title fw-bold">Recipes</h5>
                        <p class="card-text text-secondary small">Browse healthy and delicious meal ideas.</p>
                        <a asp-controller="Recipes" asp-action="Index" class="btn btn-warning mt-auto px-4">
                            Browse Recipes
                        </a>
                    </div>
                </div>
            </div>
        </div>

        @if (ViewBag.Goal != null)
        {
            <div class="row justify-content-center">
                <div class="col-lg-10">
                    <div class="card glass-card p-4">
                        <div class="d-flex align-items-center mb-4">
                            <div class="fs-3 me-3">🔥</div>
                            <h4 class="mb-0 fw-bold">Daily Calorie Tracker</h4>
                        </div>

                        <div class="row text-center g-3 mb-4">
                            <div class="col-md-3">
                                <div class="p-3 rounded-3" style="background: rgba(255,255,255,0.03)">
                                    <div class="text-secondary small uppercase fw-bold">Goal</div>
                                    <div class="fs-4 fw-bold">@ViewBag.Goal <span class="fs-6">kcal</span></div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="p-3 rounded-3" style="background: rgba(255,255,255,0.03)">
                                    <div class="text-secondary small uppercase fw-bold text-success">Consumed</div>
                                    <div class="fs-4 fw-bold">@ViewBag.Consumed <span class="fs-6 text-success">kcal</span></div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="p-3 rounded-3" style="background: rgba(255,255,255,0.03)">
                                    <div class="text-secondary small uppercase fw-bold text-danger">Burned</div>
                                    <div class="fs-4 fw-bold">@ViewBag.Burned <span class="fs-6 text-danger">kcal</span></div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="p-3 rounded-3" style="background: rgba(255,193,7,0.1)">
                                    <div class="text-warning small uppercase fw-bold">Remaining</div>
                                    <div class="fs-4 fw-bold text-warning">@ViewBag.Remaining <span class="fs-6">kcal</span></div>
                                </div>
                            </div>
                        </div>

                        @{
                            int goal = ViewBag.Goal;
                            int remaining = ViewBag.Remaining;
                            int used = goal - remaining;
                            int percent = goal <= 0 ? 0 : (used * 100 / goal);
                            percent = percent < 0 ? 0 : percent > 100 ? 100 : percent;

                            string barClass = percent >= 100 ? "bg-success" : percent > 85 ? "bg-danger" : "bg-warning text-dark";
                        }

                        <div class="progress calorie-progress mb-3" style="height: 35px;">
                            <div class="progress-bar progress-bar-striped progress-bar-animated @barClass"
                                 role="progressbar"
                                 style="width: @percent%; font-size: 1.1rem;"
                                 aria-valuenow="@percent" aria-valuemin="0" aria-valuemax="100">
                                @percent%
                            </div>
                        </div>

                        @if (ViewBag.Remaining <= 0)
                        {
                            <div class="alert bg-success text-white border-0 mt-3 d-flex align-items-center">
                                <span class="fs-4 me-3">🎉</span>
                                <div><strong>Great job!</strong> You've reached your daily goal.</div>
                            </div>
                        }
                    </div>
                </div>
            </div>
        }
    </div>
</div>